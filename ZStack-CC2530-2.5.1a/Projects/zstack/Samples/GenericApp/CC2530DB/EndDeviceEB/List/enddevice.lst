###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.40194/W32 for 8051         08/Nov/2018  14:58:44 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\我的论文\2018-Applied                           #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\Source\enddevice.c    #
#    Command line       =  -f "E:\我的论文\2018-Applied                       #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\Too #
#                          ls\CC2530DB\f8wEndev.cfg" (-DCPU32MHZ              #
#                          -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3         #
#                          -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f          #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\Too #
#                          ls\CC2530DB\f8wConfig.cfg" (-DZIGBEEPRO            #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "E:\我的论文\2018-Applied   #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\Source\enddevice.c"   #
#                          -D NWK_AUTO_POLL -D ZTOOL_P1 -D MT_TASK -D         #
#                          MT_SYS_FUNC -D MT_ZDO_FUNC -D LCD_SUPPORTED=DEBUG  #
#                          -D xPOWER_SAVING -lC "E:\我的论文\2018-Applied     #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\EndDeviceEB\ #
#                          List\" -lA "E:\我的论文\2018-Applied               #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\EndDeviceEB\ #
#                          List\" --diag_suppress Pe001,Pa010 -o              #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\EndDeviceEB\ #
#                          Obj\" -e --no_code_motion --debug --core=plain     #
#                          --dptr=16,1 --data_model=large                     #
#                          --code_model=banked --calling_convention=xdata_ree #
#                          ntrant --place_constants=data_rom                  #
#                          --nr_virtual_regs 16 -I "E:\我的论文\2018-Applied  #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\" -I         #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\Source\"  #
#                          -I "E:\我的论文\2018-Applied                       #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\ZMa #
#                          in\TI2530DB\" -I "E:\我的论文\2018-Applied         #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\hal\include\" -I                     #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\hal\target\CC2530EB\" -I             #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\include\" -I                     #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\high_level\" -I                  #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\low_level\srf04\" -I             #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mac\low_level\srf04\single_chip\"    #
#                          -I "E:\我的论文\2018-Applied                       #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\mt\" -I "E:\我的论文\2018-Applied    #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\osal\include\" -I                    #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\services\saddr\" -I                  #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\services\sdata\" -I                  #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\af\" -I                        #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\nwk\" -I                       #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sapi\" -I                      #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sec\" -I                       #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\sys\" -I                       #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\stack\zdo\" -I                       #
#                          "E:\我的论文\2018-Applied                          #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\zmac\" -I "E:\我的论文\2018-Applied  #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\..\..\..\..\ #
#                          ..\Components\zmac\f8w\" -Ohz --require_prototypes #
#    List file          =  E:\我的论文\2018-Applied                           #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\EndDeviceEB\ #
#                          List\enddevice.lst                                 #
#    Object file        =  E:\我的论文\2018-Applied                           #
#                          Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projec #
#                          ts\zstack\Samples\GenericApp\CC2530DB\EndDeviceEB\ #
#                          Obj\enddevice.r51                                  #
#                                                                             #
#                                                                             #
###############################################################################

E:\我的论文\2018-Applied Sciences\SensorNetwork\ZStack-CC2530-2.5.1a\Projects\zstack\Samples\GenericApp\Source\enddevice.c
      1          /******************************************************************************
      2            Filename:       GenericApp.c
      3            Revised:        $Date: 2012-03-07 01:04:58 -0800 (Wed, 07 Mar 2012) $
      4            Revision:       $Revision: 29656 $
      5          
      6            Description:    Generic Application (no Profile).
      7          
      8          
      9            Copyright 2004-2012 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License"). You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product. Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          ******************************************************************************/
     39          
     40          /*********************************************************************
     41            This application isn't intended to do anything useful, it is
     42            intended to be a simple example of an application's structure.
     43          
     44            This application sends "Hello World" to another "Generic"
     45            application every 5 seconds.  The application will also
     46            receives "Hello World" packets.
     47          
     48            The "Hello World" messages are sent/received as MSG type message.
     49          
     50            This applications doesn't have a profile, so it handles everything
     51            directly - itself.
     52          
     53            Key control:
     54              SW1:
     55              SW2:  initiates end device binding
     56              SW3:
     57              SW4:  initiates a match description request
     58          *********************************************************************/
     59          
     60          /*********************************************************************
     61           * INCLUDES
     62           */
     63          #include "OSAL.h"
     64          #include "AF.h"
     65          #include "ZDApp.h"
     66          #include "ZDObject.h"
     67          #include "ZDProfile.h"
     68          
     69          #include "GenericApp.h"
     70          #include "DebugTrace.h"
     71          
     72          #if !defined( WIN32 )
     73            #include "OnBoard.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xb4
   \   unsigned char volatile __sfr ADCCON1
   \                     ADCCON1:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xb6
   \   unsigned char volatile __sfr ADCCON3
   \                     ADCCON3:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xbb
   \   unsigned char volatile __sfr ADCH
   \                     ADCH:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf2
   \   unsigned char volatile __sfr ADCCFG
   \                     ADCCFG:
   \   000000                DS 1
     74          #endif
     75          
     76          /* HAL */
     77          #include "hal_lcd.h"
     78          #include "hal_led.h"
     79          #include "hal_key.h"
     80          #include "hal_uart.h"
     81          
     82          #include "DHT11.h"
     83          #include "ds18b20.h"
     84          
     85          /* RTOS */
     86          #if defined( IAR_ARMCM3_LM )
     87          #include "RTOS_App.h"
     88          #endif  
     89          
     90          /*********************************************************************
     91           * MACROS
     92           */
     93          
     94          /*********************************************************************
     95           * CONSTANTS
     96           */
     97          
     98          /*********************************************************************
     99           * TYPEDEFS
    100           */
    101          
    102          /*********************************************************************
    103           * GLOBAL VARIABLES
    104           */
    105          // This list should be filled with Application specific Cluster IDs.

   \                                 In  segment XDATA_ROM_C, align 1
    106          const cId_t GenericApp_ClusterList[GENERICAPP_MAX_CLUSTERS] =
   \                     GenericApp_ClusterList:
   \   000000   0100         DW 1
   \   000002   0000         DW 0
   \   000004   0000         DW 0
   \   000006   0000         DW 0
    107          {
    108            GENERICAPP_CLUSTERID
    109          };
    110          

   \                                 In  segment XDATA_ROM_C, align 1
    111          const SimpleDescriptionFormat_t GenericApp_SimpleDesc =
   \                     GenericApp_SimpleDesc:
   \   000000   0A           DB 10
   \   000001   040F         DW 3844
   \   000003   0100         DW 1
   \   000005   00           DB 0
   \   000006   04           DB 4
   \   000007   ....         DW GenericApp_ClusterList
   \   000009   04           DB 4
   \   00000A   ....         DW GenericApp_ClusterList
    112          {
    113            GENERICAPP_ENDPOINT,              //  int Endpoint;
    114            GENERICAPP_PROFID,                //  uint16 AppProfId[2];
    115            GENERICAPP_DEVICEID,              //  uint16 AppDeviceId[2];
    116            GENERICAPP_DEVICE_VERSION,        //  int   AppDevVer:4;
    117            GENERICAPP_FLAGS,                 //  int   AppFlags:4;
    118            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    119            (cId_t *)GenericApp_ClusterList,  //  byte *pAppInClusterList;
    120            GENERICAPP_MAX_CLUSTERS,          //  byte  AppNumInClusters;
    121            (cId_t *)GenericApp_ClusterList   //  byte *pAppInClusterList;
    122          };
    123          
    124          // This is the Endpoint/Interface description.  It is defined here, but
    125          // filled-in in GenericApp_Init().  Another way to go would be to fill
    126          // in the structure here and make it a "const" (in code space).  The
    127          // way it's defined in this sample app it is define in RAM.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    128          endPointDesc_t GenericApp_epDesc;
   \                     GenericApp_epDesc:
   \   000000                DS 6
   \   000006                REQUIRE __INIT_XDATA_Z
    129          
    130          /*********************************************************************
    131           * EXTERNAL VARIABLES
    132           */
    133          
    134          /*********************************************************************
    135           * EXTERNAL FUNCTIONS
    136           */
    137          
    138          /*********************************************************************
    139           * LOCAL VARIABLES
    140           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    141          byte GenericApp_TaskID;   // Task ID for internal task/event processing
   \                     GenericApp_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    142                                    // This variable will be received when
    143                                    // GenericApp_Init() is called.

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    144          devStates_t GenericApp_NwkState;
   \                     GenericApp_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    145          
    146          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    147          byte GenericApp_TransID;  // This is the unique message ID (counter)
   \                     GenericApp_TransID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    148          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    149          afAddrType_t GenericApp_DstAddr;
   \                     GenericApp_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    150          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    151          char sensorID = '1';
   \                     sensorID:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for sensorID>`
   \   000001                REQUIRE __INIT_XDATA_I
    152          
    153          /*********************************************************************
    154           * LOCAL FUNCTIONS
    155           */
    156          static void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg );
    157          static void GenericApp_HandleKeys( byte shift, byte keys );
    158          static void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pckt );
    159          static void GenericApp_SendTheMessage( void );
    160          
    161          void GenericApp_Send_wenshidu_Message( void );//我加的，温湿度无线发送函数
    162          
    163          void GenericApp_Send_Guangqiang_Message(void);//我加的，光敏无线发送函数
    164          uint16 myApp_ReadLightLevel( void );//我加的，读取光敏值函数
    165          
    166          void GenericApp_Send_GAN_Message( void );//我加的，烟雾无线发送函数
    167          uint16 myApp_ReadGasLevel( void );//我家的，读取烟雾值
    168          
    169          void GenericApp_Send_wedu_Message( void );//我加的，温度无线发送函数
    170          
    171          void GenericApp_Send_rentihongwai_Message( void );//我加的，人体红外无线发送函数
    172          
    173          void GenericApp_Send_Sensor_Message( void );
    174          
    175          #if defined( IAR_ARMCM3_LM )
    176          static void GenericApp_ProcessRtosMessage( void );
    177          #endif
    178          
    179          /*********************************************************************
    180           * NETWORK LAYER CALLBACKS
    181           */
    182          
    183          /*********************************************************************
    184           * PUBLIC FUNCTIONS
    185           */
    186          
    187          /*********************************************************************
    188           * @fn      GenericApp_Init
    189           *
    190           * @brief   Initialization function for the Generic App Task.
    191           *          This is called during initialization and should contain
    192           *          any application specific initialization (ie. hardware
    193           *          initialization/setup, table initialization, power up
    194           *          notificaiton ... ).
    195           *
    196           * @param   task_id - the ID assigned by OSAL.  This ID should be
    197           *                    used to send messages and set timers.
    198           *
    199           * @return  none
    200           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    201          void GenericApp_Init( uint8 task_id )
   \                     GenericApp_Init:
    202          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
    203            GenericApp_TaskID = task_id;
   \   000006   90....       MOV     DPTR,#GenericApp_TaskID
   \   000009   F0           MOVX    @DPTR,A
    204            GenericApp_NwkState = DEV_INIT;
   \   00000A   90....       MOV     DPTR,#GenericApp_NwkState
   \   00000D   7401         MOV     A,#0x1
   \   00000F   F0           MOVX    @DPTR,A
    205            GenericApp_TransID = 0;
   \   000010   90....       MOV     DPTR,#GenericApp_TransID
   \   000013   E4           CLR     A
   \   000014   F0           MOVX    @DPTR,A
    206            
    207            P0_5 = 0;
   \   000015   C285         CLR     0x80.5
    208          
    209            // Device hardware initialization can be added here or in main() (Zmain.c).
    210            // If the hardware is application specific - add it here.
    211            // If the hardware is other parts of the device add it in main().
    212          
    213            GenericApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
   \   000017   90....       MOV     DPTR,#GenericApp_DstAddr + 8
   \   00001A   7402         MOV     A,#0x2
   \   00001C   F0           MOVX    @DPTR,A
    214            GenericApp_DstAddr.endPoint = GENERICAPP_ENDPOINT;
   \   00001D   A3           INC     DPTR
   \   00001E   740A         MOV     A,#0xa
   \   000020   F0           MOVX    @DPTR,A
    215            GenericApp_DstAddr.addr.shortAddr = 0x0000;
   \   000021   90....       MOV     DPTR,#GenericApp_DstAddr
   \   000024   E4           CLR     A
   \   000025   F0           MOVX    @DPTR,A
   \   000026   A3           INC     DPTR
   \   000027   F0           MOVX    @DPTR,A
    216          
    217            // Fill out the endpoint description.
    218            GenericApp_epDesc.endPoint = GENERICAPP_ENDPOINT;
   \   000028   90....       MOV     DPTR,#GenericApp_epDesc
   \   00002B   740A         MOV     A,#0xa
   \   00002D   F0           MOVX    @DPTR,A
    219            GenericApp_epDesc.task_id = &GenericApp_TaskID;
   \   00002E   A3           INC     DPTR
   \   00002F   74..         MOV     A,#GenericApp_TaskID & 0xff
   \   000031   F0           MOVX    @DPTR,A
   \   000032   A3           INC     DPTR
   \   000033   74..         MOV     A,#(GenericApp_TaskID >> 8) & 0xff
   \   000035   F0           MOVX    @DPTR,A
    220            GenericApp_epDesc.simpleDesc
    221                      = (SimpleDescriptionFormat_t *)&GenericApp_SimpleDesc;
   \   000036   A3           INC     DPTR
   \   000037   74..         MOV     A,#GenericApp_SimpleDesc & 0xff
   \   000039   F0           MOVX    @DPTR,A
   \   00003A   A3           INC     DPTR
   \   00003B   74..         MOV     A,#(GenericApp_SimpleDesc >> 8) & 0xff
   \   00003D   F0           MOVX    @DPTR,A
    222            GenericApp_epDesc.latencyReq = noLatencyReqs;
   \   00003E   A3           INC     DPTR
   \   00003F   E4           CLR     A
   \   000040   F0           MOVX    @DPTR,A
    223          
    224            // Register the endpoint description with the AF
    225            afRegister( &GenericApp_epDesc );
   \   000041                ; Setup parameters for call to function afRegister
   \   000041   7A..         MOV     R2,#GenericApp_epDesc & 0xff
   \   000043   7B..         MOV     R3,#(GenericApp_epDesc >> 8) & 0xff
   \   000045   12....       LCALL   ??afRegister?relay
    226          
    227            // Register for all key events - This app will handle all key events
    228            RegisterForKeys( GenericApp_TaskID );
   \   000048                ; Setup parameters for call to function RegisterForKeys
   \   000048   90....       MOV     DPTR,#GenericApp_TaskID
   \   00004B   E0           MOVX    A,@DPTR
   \   00004C   F9           MOV     R1,A
   \   00004D   12....       LCALL   ??RegisterForKeys?relay
    229          
    230            // Update the display
    231          #if defined ( LCD_SUPPORTED )
    232            HalLcdWriteString( "GenericApp", HAL_LCD_LINE_1 );
   \   000050                ; Setup parameters for call to function HalLcdWriteString
   \   000050   7901         MOV     R1,#0x1
   \   000052   7A..         MOV     R2,#`?<Constant "GenericApp">` & 0xff
   \   000054   7B..         MOV     R3,#(`?<Constant "GenericApp">` >> 8) & 0xff
   \   000056   12....       LCALL   ??HalLcdWriteString?relay
    233          #endif
    234          
    235            ZDO_RegisterForZDOMsg( GenericApp_TaskID, End_Device_Bind_rsp );
   \   000059                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000059   7A20         MOV     R2,#0x20
   \   00005B   7B80         MOV     R3,#-0x80
   \   00005D   90....       MOV     DPTR,#GenericApp_TaskID
   \   000060   E0           MOVX    A,@DPTR
   \   000061   F9           MOV     R1,A
   \   000062   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    236            ZDO_RegisterForZDOMsg( GenericApp_TaskID, Match_Desc_rsp );
   \   000065                ; Setup parameters for call to function ZDO_RegisterForZDOMsg
   \   000065   7A06         MOV     R2,#0x6
   \   000067   7B80         MOV     R3,#-0x80
   \   000069   90....       MOV     DPTR,#GenericApp_TaskID
   \   00006C   E0           MOVX    A,@DPTR
   \   00006D   F9           MOV     R1,A
   \   00006E   12....       LCALL   ??ZDO_RegisterForZDOMsg?relay
    237          
    238          #if defined( IAR_ARMCM3_LM )
    239            // Register this task with RTOS task initiator
    240            RTOS_RegisterApp( task_id, GENERICAPP_RTOS_MSG_EVT );
    241          #endif
    242          }
   \   000071   7F01         MOV     R7,#0x1
   \   000073   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000076                REQUIRE _A_P0
    243          
    244          /*********************************************************************
    245           * @fn      GenericApp_ProcessEvent
    246           *
    247           * @brief   Generic Application Task event processor.  This function
    248           *          is called to process all events for the task.  Events
    249           *          include timers, messages and any other user defined events.
    250           *
    251           * @param   task_id  - The OSAL assigned task ID.
    252           * @param   events - events to process.  This is a bit map and can
    253           *                   contain more than one event.
    254           *
    255           * @return  none
    256           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    257          uint16 GenericApp_ProcessEvent( uint8 task_id, uint16 events )
   \                     GenericApp_ProcessEvent:
    258          {
   \   000000   74F2         MOV     A,#-0xe
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   EA           MOV     A,R2
   \   00000B   FE           MOV     R6,A
   \   00000C   EB           MOV     A,R3
   \   00000D   FF           MOV     R7,A
    259            afIncomingMSGPacket_t *MSGpkt;
    260            afDataConfirm_t *afDataConfirm;
    261          
    262            // Data Confirmation message fields
    263            byte sentEP;
    264            ZStatus_t sentStatus;
    265            byte sentTransID;       // This should match the value sent
    266            (void)task_id;  // Intentionally unreferenced parameter
    267          
    268            if ( events & SYS_EVENT_MSG )
   \   00000E   5480         ANL     A,#0x80
   \   000010   7003         JNZ     $+5
   \   000012   02....       LJMP    ??GenericApp_ProcessEvent_0 & 0xFFFF
    269            {
    270              MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000015                ; Setup parameters for call to function osal_msg_receive
   \   000015   802B         SJMP    ??GenericApp_ProcessEvent_1
    271              while ( MSGpkt )
    272              {
    273                switch ( MSGpkt->hdr.event )
    274                {
    275                  case ZDO_CB_MSG:
    276                    GenericApp_ProcessZDOMsgs( (zdoIncomingMsg_t *)MSGpkt );
    277                    break;
    278          
    279                  case KEY_CHANGE:
    280                    GenericApp_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    281                    break;
    282          
    283                  case AF_DATA_CONFIRM_CMD:
    284                    // This message is received as a confirmation of a data packet sent.
    285                    // The status is of ZStatus_t type [defined in ZComDef.h]
    286                    // The message fields are defined in AF.h
    287                    afDataConfirm = (afDataConfirm_t *)MSGpkt;
    288                    sentEP = afDataConfirm->endpoint;
    289                    sentStatus = afDataConfirm->hdr.status;
    290                    sentTransID = afDataConfirm->transID;
    291                    (void)sentEP;
    292                    (void)sentTransID;
    293          
    294                    // Action taken when confirmation is received.
    295                    if ( sentStatus != ZSuccess )
    296                    {
    297                      // The data wasn't delivered -- Do something
    298                    }
    299                    break;
    300          
    301                  case AF_INCOMING_MSG_CMD:
    302                    GenericApp_MessageMSGCB( MSGpkt );
    303                    break;
    304          
    305                  case ZDO_STATE_CHANGE:
    306                    GenericApp_NwkState = (devStates_t)(MSGpkt->hdr.status);
   \                     ??GenericApp_ProcessEvent_2:
   \   000017   A3           INC     DPTR
   \   000018   E0           MOVX    A,@DPTR
   \   000019   90....       MOV     DPTR,#GenericApp_NwkState
   \   00001C   F0           MOVX    @DPTR,A
    307                    if ( (GenericApp_NwkState == DEV_ZB_COORD)
    308                        || (GenericApp_NwkState == DEV_ROUTER)
    309                        || (GenericApp_NwkState == DEV_END_DEVICE) )
   \   00001D   6409         XRL     A,#0x9
   \   00001F   600A         JZ      ??GenericApp_ProcessEvent_3
   \   000021   E0           MOVX    A,@DPTR
   \   000022   6407         XRL     A,#0x7
   \   000024   6005         JZ      ??GenericApp_ProcessEvent_3
   \   000026   E0           MOVX    A,@DPTR
   \   000027   6406         XRL     A,#0x6
   \   000029   7010         JNZ     ??GenericApp_ProcessEvent_4
    310                    {
    311                      // Start sending "the" message in a regular interval.
    312                      osal_start_timerEx( GenericApp_TaskID,
    313                                          GENERICAPP_SEND_MSG_EVT,
    314                                          GENERICAPP_SEND_MSG_TIMEOUT );
   \                     ??GenericApp_ProcessEvent_3:
   \   00002B                ; Setup parameters for call to function osal_start_timerEx
   \   00002B   7C88         MOV     R4,#-0x78
   \   00002D   7D13         MOV     R5,#0x13
   \   00002F   7A01         MOV     R2,#0x1
   \   000031   7B00         MOV     R3,#0x0
   \   000033   90....       MOV     DPTR,#GenericApp_TaskID
   \   000036   E0           MOVX    A,@DPTR
   \   000037   F9           MOV     R1,A
   \   000038   12....       LCALL   ??osal_start_timerEx?relay
    315                    }
    316                    break;
    317          
    318                  default:
    319                    break;
    320                }
    321          
    322                // Release the memory
    323                osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??GenericApp_ProcessEvent_4:
   \   00003B                ; Setup parameters for call to function osal_msg_deallocate
   \   00003B   AA..         MOV     R2,?V0 + 0
   \   00003D   AB..         MOV     R3,?V0 + 1
   \   00003F   12....       LCALL   ??osal_msg_deallocate?relay
    324          
    325                // Next
    326                MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( GenericApp_TaskID );
   \   000042                ; Setup parameters for call to function osal_msg_receive
   \                     ??GenericApp_ProcessEvent_1:
   \   000042   90....       MOV     DPTR,#GenericApp_TaskID
   \   000045   E0           MOVX    A,@DPTR
   \   000046   F9           MOV     R1,A
   \   000047   12....       LCALL   ??osal_msg_receive?relay
   \   00004A   8A..         MOV     ?V0 + 0,R2
   \   00004C   8B..         MOV     ?V0 + 1,R3
   \   00004E   E5..         MOV     A,?V0 + 0
   \   000050   45..         ORL     A,?V0 + 1
   \   000052   7003         JNZ     $+5
   \   000054   02....       LJMP    ??GenericApp_ProcessEvent_5 & 0xFFFF
   \   000057   85..82       MOV     DPL,?V0 + 0
   \   00005A   85..83       MOV     DPH,?V0 + 1
   \   00005D   E0           MOVX    A,@DPTR
   \   00005E   2440         ADD     A,#0x40
   \   000060   7003         JNZ     $+5
   \   000062   02....       LJMP    ??GenericApp_ProcessEvent_6 & 0xFFFF
   \   000065   24EF         ADD     A,#-0x11
   \   000067   60AE         JZ      ??GenericApp_ProcessEvent_2
   \   000069   24FE         ADD     A,#-0x2
   \   00006B   70CE         JNZ     ??GenericApp_ProcessEvent_4
   \   00006D   E5..         MOV     A,?V0 + 0
   \   00006F   240C         ADD     A,#0xc
   \   000071   F582         MOV     DPL,A
   \   000073   E5..         MOV     A,?V0 + 1
   \   000075   3400         ADDC    A,#0x0
   \   000077   F583         MOV     DPH,A
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   F5..         MOV     ?V0 + 2,A
   \   00007C   A3           INC     DPTR
   \   00007D   E0           MOVX    A,@DPTR
   \   00007E   F5..         MOV     ?V0 + 3,A
   \   000080   78..         MOV     R0,#?V0 + 2
   \   000082   12....       LCALL   ?US_SWITCH_SPARSE
   \                     `?<Jumptable for GenericApp_ProcessEvent>_0`:
   \   000085   0000         DW        0
   \   000087   0200         DW        2
   \   000089   0680         DW        32774
   \   00008B   ....         DW        ??GenericApp_ProcessEvent_7
   \   00008D   2080         DW        32800
   \   00008F   ....         DW        ??GenericApp_ProcessEvent_8
   \   000091   ....         DW        ??GenericApp_ProcessEvent_4
   \                     ??GenericApp_ProcessEvent_7:
   \   000093                ; Setup parameters for call to function ZDO_ParseEPListRsp
   \   000093   AA..         MOV     R2,?V0 + 0
   \   000095   AB..         MOV     R3,?V0 + 1
   \   000097   12....       LCALL   ??ZDO_ParseEPListRsp?relay
   \   00009A   8A..         MOV     ?V0 + 2,R2
   \   00009C   8B..         MOV     ?V0 + 3,R3
   \   00009E   EA           MOV     A,R2
   \   00009F   45..         ORL     A,?V0 + 3
   \   0000A1   6098         JZ      ??GenericApp_ProcessEvent_4
   \   0000A3   8A82         MOV     DPL,R2
   \   0000A5   8B83         MOV     DPH,R3
   \   0000A7   E0           MOVX    A,@DPTR
   \   0000A8   7032         JNZ     ??GenericApp_ProcessEvent_9
   \   0000AA   A3           INC     DPTR
   \   0000AB   A3           INC     DPTR
   \   0000AC   A3           INC     DPTR
   \   0000AD   E0           MOVX    A,@DPTR
   \   0000AE   602C         JZ      ??GenericApp_ProcessEvent_9
   \   0000B0   90....       MOV     DPTR,#GenericApp_DstAddr + 8
   \   0000B3   7402         MOV     A,#0x2
   \   0000B5   F0           MOVX    @DPTR,A
   \   0000B6   8A82         MOV     DPL,R2
   \   0000B8   8B83         MOV     DPH,R3
   \   0000BA   A3           INC     DPTR
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F8           MOV     R0,A
   \   0000BD   A3           INC     DPTR
   \   0000BE   E0           MOVX    A,@DPTR
   \   0000BF   F9           MOV     R1,A
   \   0000C0   90....       MOV     DPTR,#GenericApp_DstAddr
   \   0000C3   E8           MOV     A,R0
   \   0000C4   F0           MOVX    @DPTR,A
   \   0000C5   A3           INC     DPTR
   \   0000C6   E9           MOV     A,R1
   \   0000C7   F0           MOVX    @DPTR,A
   \   0000C8   8A82         MOV     DPL,R2
   \   0000CA   8B83         MOV     DPH,R3
   \   0000CC   A3           INC     DPTR
   \   0000CD   A3           INC     DPTR
   \   0000CE   A3           INC     DPTR
   \   0000CF   A3           INC     DPTR
   \   0000D0   E0           MOVX    A,@DPTR
   \   0000D1   90....       MOV     DPTR,#GenericApp_DstAddr + 9
   \   0000D4   F0           MOVX    @DPTR,A
   \   0000D5                ; Setup parameters for call to function HalLedSet
   \   0000D5   7A01         MOV     R2,#0x1
   \   0000D7   7908         MOV     R1,#0x8
   \   0000D9   12....       LCALL   ??HalLedSet?relay
   \                     ??GenericApp_ProcessEvent_9:
   \   0000DC                ; Setup parameters for call to function osal_mem_free
   \   0000DC   AA..         MOV     R2,?V0 + 2
   \   0000DE   AB..         MOV     R3,?V0 + 3
   \   0000E0   12....       LCALL   ??osal_mem_free?relay
   \   0000E3   02....       LJMP    ??GenericApp_ProcessEvent_4 & 0xFFFF
   \                     ??GenericApp_ProcessEvent_8:
   \   0000E6   E5..         MOV     A,?V0 + 0
   \   0000E8   2413         ADD     A,#0x13
   \   0000EA   F582         MOV     DPL,A
   \   0000EC   E5..         MOV     A,?V0 + 1
   \   0000EE   3400         ADDC    A,#0x0
   \   0000F0   F583         MOV     DPH,A
   \   0000F2   E0           MOVX    A,@DPTR
   \   0000F3   F8           MOV     R0,A
   \   0000F4   A3           INC     DPTR
   \   0000F5   E0           MOVX    A,@DPTR
   \   0000F6   F583         MOV     DPH,A
   \   0000F8   8882         MOV     DPL,R0
   \   0000FA   E0           MOVX    A,@DPTR
   \   0000FB   700A         JNZ     ??GenericApp_ProcessEvent_10
   \   0000FD                ; Setup parameters for call to function HalLedSet
   \   0000FD   7A01         MOV     R2,#0x1
   \                     ??GenericApp_ProcessEvent_11:
   \   0000FF   7908         MOV     R1,#0x8
   \   000101   12....       LCALL   ??HalLedSet?relay
   \   000104   02....       LJMP    ??GenericApp_ProcessEvent_4 & 0xFFFF
   \                     ??GenericApp_ProcessEvent_10:
   \   000107                ; Setup parameters for call to function HalLedSet
   \   000107   7A04         MOV     R2,#0x4
   \   000109   80F4         SJMP    ??GenericApp_ProcessEvent_11
   \                     ??GenericApp_ProcessEvent_6:
   \   00010B   A3           INC     DPTR
   \   00010C   A3           INC     DPTR
   \   00010D   A3           INC     DPTR
   \   00010E   E0           MOVX    A,@DPTR
   \   00010F   F5..         MOV     ?V0 + 4,A
   \   000111   85..82       MOV     DPL,?V0 + 0
   \   000114   85..83       MOV     DPH,?V0 + 1
   \   000117   A3           INC     DPTR
   \   000118   A3           INC     DPTR
   \   000119   E0           MOVX    A,@DPTR
   \   00011A   6003         JZ      $+5
   \   00011C   02....       LJMP    ??GenericApp_ProcessEvent_4 & 0xFFFF
   \   00011F   E5..         MOV     A,?V0 + 4
   \   000121   A2E1         MOV     C,0xE0 /* A   */.1
   \   000123   506A         JNC     ??GenericApp_ProcessEvent_12
   \   000125                ; Setup parameters for call to function HalLedSet
   \   000125   7A00         MOV     R2,#0x0
   \   000127   7908         MOV     R1,#0x8
   \   000129   12....       LCALL   ??HalLedSet?relay
   \   00012C   7408         MOV     A,#0x8
   \   00012E   12....       LCALL   ?XSTACK_DISP0_8
   \   000131   7402         MOV     A,#0x2
   \   000133   F0           MOVX    @DPTR,A
   \   000134   85..82       MOV     DPL,?XSP + 0
   \   000137   85..83       MOV     DPH,?XSP + 1
   \   00013A   E4           CLR     A
   \   00013B   F0           MOVX    @DPTR,A
   \   00013C   A3           INC     DPTR
   \   00013D   F0           MOVX    @DPTR,A
   \   00013E                ; Setup parameters for call to function NLME_GetShortAddr
   \   00013E   12....       LCALL   ??NLME_GetShortAddr?relay
   \   000141   8A..         MOV     ?V0 + 2,R2
   \   000143   8B..         MOV     ?V0 + 3,R3
   \   000145   AC..         MOV     R4,?V0 + 2
   \   000147   AD..         MOV     R5,?V0 + 3
   \   000149   75....       MOV     ?V0 + 2,#GenericApp_ClusterList & 0xff
   \   00014C   75....       MOV     ?V0 + 3,#(GenericApp_ClusterList >> 8) & 0xff
   \   00014F                ; Setup parameters for call to function ZDP_EndDeviceBindReq
   \   00014F   75..00       MOV     ?V0 + 5,#0x0
   \   000152   78..         MOV     R0,#?V0 + 5
   \   000154   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000157   78..         MOV     R0,#?V0 + 2
   \   000159   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00015C   75..04       MOV     ?V0 + 5,#0x4
   \   00015F   78..         MOV     R0,#?V0 + 5
   \   000161   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000164   78..         MOV     R0,#?V0 + 2
   \   000166   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000169   75..04       MOV     ?V0 + 2,#0x4
   \   00016C   78..         MOV     R0,#?V0 + 2
   \   00016E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000171   75..0F       MOV     ?V0 + 3,#0xf
   \   000174   78..         MOV     R0,#?V0 + 2
   \   000176   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000179   90....       MOV     DPTR,#GenericApp_epDesc
   \   00017C   E0           MOVX    A,@DPTR
   \   00017D   F9           MOV     R1,A
   \   00017E   7409         MOV     A,#0x9
   \   000180   12....       LCALL   ?XSTACK_DISP0_8
   \   000183   AA82         MOV     R2,DPL
   \   000185   AB83         MOV     R3,DPH
   \   000187   12....       LCALL   ??ZDP_EndDeviceBindReq?relay
   \   00018A   7409         MOV     A,#0x9
   \   00018C   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??GenericApp_ProcessEvent_12:
   \   00018F   E5..         MOV     A,?V0 + 4
   \   000191   A2E3         MOV     C,0xE0 /* A   */.3
   \   000193   4003         JC      $+5
   \   000195   02....       LJMP    ??GenericApp_ProcessEvent_4 & 0xFFFF
   \   000198                ; Setup parameters for call to function HalLedSet
   \   000198   7A00         MOV     R2,#0x0
   \   00019A   7908         MOV     R1,#0x8
   \   00019C   12....       LCALL   ??HalLedSet?relay
   \   00019F   7408         MOV     A,#0x8
   \   0001A1   12....       LCALL   ?XSTACK_DISP0_8
   \   0001A4   740F         MOV     A,#0xf
   \   0001A6   F0           MOVX    @DPTR,A
   \   0001A7   85..82       MOV     DPL,?XSP + 0
   \   0001AA   85..83       MOV     DPH,?XSP + 1
   \   0001AD   74FF         MOV     A,#-0x1
   \   0001AF   F0           MOVX    @DPTR,A
   \   0001B0   A3           INC     DPTR
   \   0001B1   F0           MOVX    @DPTR,A
   \   0001B2   75....       MOV     ?V0 + 2,#GenericApp_ClusterList & 0xff
   \   0001B5   75....       MOV     ?V0 + 3,#(GenericApp_ClusterList >> 8) & 0xff
   \   0001B8                ; Setup parameters for call to function ZDP_MatchDescReq
   \   0001B8   75..00       MOV     ?V0 + 4,#0x0
   \   0001BB   78..         MOV     R0,#?V0 + 4
   \   0001BD   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001C0   78..         MOV     R0,#?V0 + 2
   \   0001C2   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001C5   75..04       MOV     ?V0 + 4,#0x4
   \   0001C8   78..         MOV     R0,#?V0 + 4
   \   0001CA   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001CD   78..         MOV     R0,#?V0 + 2
   \   0001CF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001D2   75..04       MOV     ?V0 + 2,#0x4
   \   0001D5   75..0F       MOV     ?V0 + 3,#0xf
   \   0001D8   78..         MOV     R0,#?V0 + 2
   \   0001DA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001DD   7904         MOV     R1,#0x4
   \   0001DF   7CFF         MOV     R4,#-0x1
   \   0001E1   7DFF         MOV     R5,#-0x1
   \   0001E3   7408         MOV     A,#0x8
   \   0001E5   12....       LCALL   ?XSTACK_DISP0_8
   \   0001E8   AA82         MOV     R2,DPL
   \   0001EA   AB83         MOV     R3,DPH
   \   0001EC   12....       LCALL   ??ZDP_MatchDescReq?relay
   \   0001EF   7408         MOV     A,#0x8
   \   0001F1   12....       LCALL   ?DEALLOC_XSTACK8
   \   0001F4   02....       LJMP    ??GenericApp_ProcessEvent_4 & 0xFFFF
    327              }
    328          
    329              // return unprocessed events
    330              return (events ^ SYS_EVENT_MSG);
   \                     ??GenericApp_ProcessEvent_5:
   \   0001F7   EE           MOV     A,R6
   \   0001F8   FA           MOV     R2,A
   \   0001F9   EF           MOV     A,R7
   \   0001FA   6480         XRL     A,#0x80
   \                     ??GenericApp_ProcessEvent_13:
   \   0001FC   FB           MOV     R3,A
   \   0001FD   8023         SJMP    ??GenericApp_ProcessEvent_14
    331            }
    332          
    333            // Send a message out - This event is generated by a timer
    334            //  (setup in GenericApp_Init()).
    335            if ( events & GENERICAPP_SEND_MSG_EVT )
   \                     ??GenericApp_ProcessEvent_0:
   \   0001FF   EE           MOV     A,R6
   \   000200   A2E0         MOV     C,0xE0 /* A   */.0
   \   000202   501A         JNC     ??GenericApp_ProcessEvent_15
    336            {
    337              // Send "the" message
    338              //GenericApp_SendTheMessage();
    339              //GenericApp_Send_GAN_Message();//无线发送烟雾
    340              //GenericApp_Send_Guangqiang_Message();//无线发送光强
    341              //GenericApp_Send_rentihongwai_Message( );//我加的，人体红外无线发送函数
    342              //GenericApp_Send_wenshidu_Message();
    343              //GenericApp_Send_wedu_Message( );//我加的，温度无线发送函数
    344              GenericApp_Send_Sensor_Message();
   \   000204                ; Setup parameters for call to function GenericApp_Send_Sensor_Message
   \   000204   12....       LCALL   ??GenericApp_Send_Sensor_Message?relay
    345              
    346              // Setup to send message again
    347              osal_start_timerEx( GenericApp_TaskID,
    348                                  GENERICAPP_SEND_MSG_EVT,
    349                                  GENERICAPP_SEND_MSG_TIMEOUT );
   \   000207                ; Setup parameters for call to function osal_start_timerEx
   \   000207   7C88         MOV     R4,#-0x78
   \   000209   7D13         MOV     R5,#0x13
   \   00020B   7A01         MOV     R2,#0x1
   \   00020D   7B00         MOV     R3,#0x0
   \   00020F   90....       MOV     DPTR,#GenericApp_TaskID
   \   000212   E0           MOVX    A,@DPTR
   \   000213   F9           MOV     R1,A
   \   000214   12....       LCALL   ??osal_start_timerEx?relay
    350          
    351              // return unprocessed events
    352              return (events ^ GENERICAPP_SEND_MSG_EVT);
   \   000217   EE           MOV     A,R6
   \   000218   6401         XRL     A,#0x1
   \   00021A   FA           MOV     R2,A
   \   00021B   EF           MOV     A,R7
   \   00021C   80DE         SJMP    ??GenericApp_ProcessEvent_13
    353            }
    354          
    355            
    356          #if defined( IAR_ARMCM3_LM )
    357            // Receive a message from the RTOS queue
    358            if ( events & GENERICAPP_RTOS_MSG_EVT )
    359            {
    360              // Process message from RTOS queue
    361              GenericApp_ProcessRtosMessage();
    362          
    363              // return unprocessed events
    364              return (events ^ GENERICAPP_RTOS_MSG_EVT);
    365            }
    366          #endif
    367          
    368            // Discard unknown events
    369            return 0;
   \                     ??GenericApp_ProcessEvent_15:
   \   00021E   7A00         MOV     R2,#0x0
   \   000220   7B00         MOV     R3,#0x0
   \                     ??GenericApp_ProcessEvent_14:
   \   000222   7409         MOV     A,#0x9
   \   000224   12....       LCALL   ?DEALLOC_XSTACK8
   \   000227   7F06         MOV     R7,#0x6
   \   000229   02....       LJMP    ?BANKED_LEAVE_XDATA
    370          }
    371          
    372          /*********************************************************************
    373           * Event Generation Functions
    374           */
    375          
    376          /*********************************************************************
    377           * @fn      GenericApp_ProcessZDOMsgs()
    378           *
    379           * @brief   Process response messages
    380           *
    381           * @param   none
    382           *
    383           * @return  none
    384           */
    385          static void GenericApp_ProcessZDOMsgs( zdoIncomingMsg_t *inMsg )
    386          {
    387            switch ( inMsg->clusterID )
    388            {
    389              case End_Device_Bind_rsp:
    390                if ( ZDO_ParseBindRsp( inMsg ) == ZSuccess )
    391                {
    392                  // Light LED
    393                  HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
    394                }
    395          #if defined( BLINK_LEDS )
    396                else
    397                {
    398                  // Flash LED to show failure
    399                  HalLedSet ( HAL_LED_4, HAL_LED_MODE_FLASH );
    400                }
    401          #endif
    402                break;
    403          
    404              case Match_Desc_rsp:
    405                {
    406                  ZDO_ActiveEndpointRsp_t *pRsp = ZDO_ParseEPListRsp( inMsg );
    407                  if ( pRsp )
    408                  {
    409                    if ( pRsp->status == ZSuccess && pRsp->cnt )
    410                    {
    411                      GenericApp_DstAddr.addrMode = (afAddrMode_t)Addr16Bit;
    412                      GenericApp_DstAddr.addr.shortAddr = pRsp->nwkAddr;
    413                      // Take the first endpoint, Can be changed to search through endpoints
    414                      GenericApp_DstAddr.endPoint = pRsp->epList[0];
    415          
    416                      // Light LED
    417                      HalLedSet( HAL_LED_4, HAL_LED_MODE_ON );
    418                    }
    419                    osal_mem_free( pRsp );
    420                  }
    421                }
    422                break;
    423            }
    424          }
    425          
    426          /*********************************************************************
    427           * @fn      GenericApp_HandleKeys
    428           *
    429           * @brief   Handles all key events for this device.
    430           *
    431           * @param   shift - true if in shift/alt.
    432           * @param   keys - bit field for key events. Valid entries:
    433           *                 HAL_KEY_SW_4
    434           *                 HAL_KEY_SW_3
    435           *                 HAL_KEY_SW_2
    436           *                 HAL_KEY_SW_1
    437           *
    438           * @return  none
    439           */
    440          static void GenericApp_HandleKeys( uint8 shift, uint8 keys )
    441          {
    442            zAddrType_t dstAddr;
    443          
    444            // Shift is used to make each button/switch dual purpose.
    445            if ( shift )
    446            {
    447              if ( keys & HAL_KEY_SW_1 )
    448              {
    449              }
    450              if ( keys & HAL_KEY_SW_2 )
    451              {
    452              }
    453              if ( keys & HAL_KEY_SW_3 )
    454              {
    455              }
    456              if ( keys & HAL_KEY_SW_4 )
    457              {
    458              }
    459            }
    460            else
    461            {
    462              if ( keys & HAL_KEY_SW_1 )
    463              {
    464                // Since SW1 isn't used for anything else in this application...
    465          #if defined( SWITCH1_BIND )
    466                // we can use SW1 to simulate SW2 for devices that only have one switch,
    467                keys |= HAL_KEY_SW_2;
    468          #elif defined( SWITCH1_MATCH )
    469                // or use SW1 to simulate SW4 for devices that only have one switch
    470                keys |= HAL_KEY_SW_4;
    471          #endif
    472              }
    473          
    474              if ( keys & HAL_KEY_SW_2 )
    475              {
    476                HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
    477          
    478                // Initiate an End Device Bind Request for the mandatory endpoint
    479                dstAddr.addrMode = Addr16Bit;
    480                dstAddr.addr.shortAddr = 0x0000; // Coordinator
    481                ZDP_EndDeviceBindReq( &dstAddr, NLME_GetShortAddr(),
    482                                      GenericApp_epDesc.endPoint,
    483                                      GENERICAPP_PROFID,
    484                                      GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    485                                      GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    486                                      FALSE );
    487              }
    488          
    489              if ( keys & HAL_KEY_SW_3 )
    490              {
    491              }
    492          
    493              if ( keys & HAL_KEY_SW_4 )
    494              {
    495                HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF );
    496                // Initiate a Match Description Request (Service Discovery)
    497                dstAddr.addrMode = AddrBroadcast;
    498                dstAddr.addr.shortAddr = NWK_BROADCAST_SHORTADDR;
    499                ZDP_MatchDescReq( &dstAddr, NWK_BROADCAST_SHORTADDR,
    500                                  GENERICAPP_PROFID,
    501                                  GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    502                                  GENERICAPP_MAX_CLUSTERS, (cId_t *)GenericApp_ClusterList,
    503                                  FALSE );
    504              }
    505            }
    506          }
    507          
    508          /*********************************************************************
    509           * LOCAL FUNCTIONS
    510           */
    511          
    512          /*********************************************************************
    513           * @fn      GenericApp_MessageMSGCB
    514           *
    515           * @brief   Data message processor callback.  This function processes
    516           *          any incoming data - probably from other devices.  So, based
    517           *          on cluster ID, perform the intended action.
    518           *
    519           * @param   none
    520           *
    521           * @return  none
    522           */
    523          static void GenericApp_MessageMSGCB( afIncomingMSGPacket_t *pkt )
    524          {
    525            /*switch ( pkt->clusterId )
    526            {
    527              case GENERICAPP_CLUSTERID:
    528                // "the" message
    529          #if defined( LCD_SUPPORTED )
    530                HalLcdWriteScreen( (char*)pkt->cmd.Data, "rcvd" );
    531          #elif defined( WIN32 )
    532                WPRINTSTR( pkt->cmd.Data );
    533          #endif
    534                break;
    535            }*/
    536          }
    537          
    538          /*********************************************************************
    539           * @fn      GenericApp_Send_Sensor_Message
    540           *
    541           * @brief   point to point.
    542           *
    543           * @param   none
    544           *
    545           * @return  none
    546           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    547          void GenericApp_Send_Sensor_Message( void )
   \                     GenericApp_Send_Sensor_Message:
    548          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV     A,#-0xb
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    549            byte strTemp[11];
    550            
    551            strTemp[0] = 'S';
   \   00000A   85..82       MOV     DPL,?XSP + 0
   \   00000D   85..83       MOV     DPH,?XSP + 1
   \   000010   7453         MOV     A,#0x53
   \   000012   12....       LCALL   ?Subroutine4 & 0xFFFF
    552            strTemp[1] = sensorID;
   \                     ??CrossCallReturnLabel_5:
   \   000015   C0E0         PUSH    A
   \   000017   7401         MOV     A,#0x1
   \   000019   12....       LCALL   ?XSTACK_DISP0_8
   \   00001C   D0E0         POP     A
   \   00001E   F0           MOVX    @DPTR,A
    553          
    554            //read temperature and humidity
    555            DHT11();
   \   00001F                ; Setup parameters for call to function DHT11
   \   00001F   12....       LCALL   ?Subroutine5 & 0xFFFF
    556            strTemp[2] = wendu_shi+0x30;
   \                     ??CrossCallReturnLabel_10:
   \   000022   C0E0         PUSH    A
   \   000024   7402         MOV     A,#0x2
   \   000026   12....       LCALL   ?XSTACK_DISP0_8
   \   000029   D0E0         POP     A
   \   00002B   F0           MOVX    @DPTR,A
    557            strTemp[3] = wendu_ge+0x30;
   \   00002C   90....       MOV     DPTR,#wendu_ge
   \   00002F   E0           MOVX    A,@DPTR
   \   000030   2430         ADD     A,#0x30
   \   000032   C0E0         PUSH    A
   \   000034   7403         MOV     A,#0x3
   \   000036   12....       LCALL   ?XSTACK_DISP0_8
   \   000039   D0E0         POP     A
   \   00003B   F0           MOVX    @DPTR,A
    558            strTemp[4] = shidu_shi+0x30;
   \   00003C   90....       MOV     DPTR,#shidu_shi
   \   00003F   E0           MOVX    A,@DPTR
   \   000040   2430         ADD     A,#0x30
   \   000042   C0E0         PUSH    A
   \   000044   7404         MOV     A,#0x4
   \   000046   12....       LCALL   ?XSTACK_DISP0_8
   \   000049   D0E0         POP     A
   \   00004B   F0           MOVX    @DPTR,A
    559            strTemp[5] = shidu_ge+0x30;  
   \   00004C   90....       MOV     DPTR,#shidu_ge
   \   00004F   E0           MOVX    A,@DPTR
   \   000050   2430         ADD     A,#0x30
   \   000052   C0E0         PUSH    A
   \   000054   7405         MOV     A,#0x5
   \   000056   12....       LCALL   ?XSTACK_DISP0_8
   \   000059   D0E0         POP     A
   \   00005B   F0           MOVX    @DPTR,A
    560            //read light level
    561            uint16 LightLevel = myApp_ReadLightLevel();  
   \   00005C                ; Setup parameters for call to function myApp_ReadLightLevel
   \   00005C   12....       LCALL   ?Subroutine6 & 0xFFFF
    562            strTemp[6] = LightLevel / 10%10 + '0';
   \                     ??CrossCallReturnLabel_12:
   \   00005F   12....       LCALL   ?US_DIV_MOD
   \   000062   7A0A         MOV     R2,#0xa
   \   000064   7B00         MOV     R3,#0x0
   \   000066   12....       LCALL   ?US_DIV_MOD
   \   000069   EA           MOV     A,R2
   \   00006A   2430         ADD     A,#0x30
   \   00006C   C0E0         PUSH    A
   \   00006E   7406         MOV     A,#0x6
   \   000070   12....       LCALL   ?XSTACK_DISP0_8
   \   000073   D0E0         POP     A
   \   000075   F0           MOVX    @DPTR,A
    563            strTemp[7] = LightLevel % 100 + '0';
   \   000076   EC           MOV     A,R4
   \   000077   F8           MOV     R0,A
   \   000078   ED           MOV     A,R5
   \   000079   F9           MOV     R1,A
   \   00007A   7A64         MOV     R2,#0x64
   \   00007C   7B00         MOV     R3,#0x0
   \   00007E   12....       LCALL   ?US_DIV_MOD
   \   000081   EA           MOV     A,R2
   \   000082   2430         ADD     A,#0x30
   \   000084   C0E0         PUSH    A
   \   000086   7407         MOV     A,#0x7
   \   000088   12....       LCALL   ?XSTACK_DISP0_8
   \   00008B   D0E0         POP     A
   \   00008D   F0           MOVX    @DPTR,A
    564            //read gas level
    565            uint16 GasLevel = myApp_ReadGasLevel();
   \   00008E                ; Setup parameters for call to function myApp_ReadGasLevel
   \   00008E   12....       LCALL   ?Subroutine7 & 0xFFFF
    566            strTemp[8] = GasLevel / 10%10 + '0';
   \                     ??CrossCallReturnLabel_14:
   \   000091   7A0A         MOV     R2,#0xa
   \   000093   7B00         MOV     R3,#0x0
   \   000095   12....       LCALL   ?US_DIV_MOD
   \   000098   7A0A         MOV     R2,#0xa
   \   00009A   7B00         MOV     R3,#0x0
   \   00009C   12....       LCALL   ?US_DIV_MOD
   \   00009F   EA           MOV     A,R2
   \   0000A0   2430         ADD     A,#0x30
   \   0000A2   C0E0         PUSH    A
   \   0000A4   7408         MOV     A,#0x8
   \   0000A6   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A9   D0E0         POP     A
   \   0000AB   12....       LCALL   ??Subroutine12_0 & 0xFFFF
    567            strTemp[9] = GasLevel % 10 + '0';
   \                     ??CrossCallReturnLabel_27:
   \   0000AE   12....       LCALL   ?US_DIV_MOD
   \   0000B1   EA           MOV     A,R2
   \   0000B2   2430         ADD     A,#0x30
   \   0000B4   C0E0         PUSH    A
   \   0000B6   7409         MOV     A,#0x9
   \   0000B8   12....       LCALL   ?XSTACK_DISP0_8
   \   0000BB   D0E0         POP     A
   \   0000BD   F0           MOVX    @DPTR,A
    568            //read PIR sensor
    569            if(P0_5 == 0)
   \   0000BE   A285         MOV     C,0x80.5
   \   0000C0   740A         MOV     A,#0xa
   \   0000C2   4007         JC      ??GenericApp_Send_Sensor_Message_0
    570            {
    571              strTemp[10] = '0' ;
   \   0000C4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C7   7430         MOV     A,#0x30
   \   0000C9   8005         SJMP    ??GenericApp_Send_Sensor_Message_1
    572            }
    573            else
    574            {
    575              strTemp[10] = '1' ;
   \                     ??GenericApp_Send_Sensor_Message_0:
   \   0000CB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000CE   7431         MOV     A,#0x31
    576            }
   \                     ??GenericApp_Send_Sensor_Message_1:
   \   0000D0   12....       LCALL   ?Subroutine3 & 0xFFFF
    577            
    578            AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    579                                 GenericApp_Sensor_CLUSTERID,
    580                                 11,
    581                                 strTemp,
    582                                 &GenericApp_TransID,
    583                                 AF_DISCV_ROUTE,
    584                                 AF_DEFAULT_RADIUS ) ;
   \                     ??CrossCallReturnLabel_0:
   \   0000D3   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000D6   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   0000D9   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   0000DC   78..         MOV     R0,#?V0 + 0
   \   0000DE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E1   7403         MOV     A,#0x3
   \   0000E3   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E6   8582..       MOV     ?V0 + 0,DPL
   \   0000E9   8583..       MOV     ?V0 + 1,DPH
   \   0000EC   78..         MOV     R0,#?V0 + 0
   \   0000EE   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000F1   75..0B       MOV     ?V0 + 0,#0xb
   \   0000F4   75..00       MOV     ?V0 + 1,#0x0
   \   0000F7   78..         MOV     R0,#?V0 + 0
   \   0000F9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000FC   75..07       MOV     ?V0 + 0,#0x7
   \   0000FF   78..         MOV     R0,#?V0 + 0
   \   000101   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000104   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000107   12....       LCALL   ?DEALLOC_XSTACK8
    585          }
   \   00010A   740B         MOV     A,#0xb
   \   00010C   80..         SJMP    ??Subroutine11_0
   \   00010E                REQUIRE _A_P0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine11_0:
   \   000000   12....       LCALL   ?DEALLOC_XSTACK8
   \   000003   7F02         MOV     R7,#0x2
   \   000005   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   7920         MOV     R1,#0x20
   \   000002   7C..         MOV     R4,#GenericApp_epDesc & 0xff
   \   000004   7D..         MOV     R5,#(GenericApp_epDesc >> 8) & 0xff
   \   000006   7A..         MOV     R2,#GenericApp_DstAddr & 0xff
   \   000008   7B..         MOV     R3,#(GenericApp_DstAddr >> 8) & 0xff
   \   00000A   12....       LCALL   ??AF_DataRequest?relay
   \   00000D   7409         MOV     A,#0x9
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL   ??DHT11?relay
   \   000003   90....       MOV     DPTR,#wendu_shi
   \   000006   E0           MOVX    A,@DPTR
   \   000007   2430         ADD     A,#0x30
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ??myApp_ReadLightLevel?relay
   \   000003   8A..         MOV     ?V0 + 0,R2
   \   000005   8B..         MOV     ?V0 + 1,R3
   \   000007   AC..         MOV     R4,?V0 + 0
   \   000009   AD..         MOV     R5,?V0 + 1
   \   00000B   EC           MOV     A,R4
   \   00000C   F8           MOV     R0,A
   \   00000D   ED           MOV     A,R5
   \   00000E   F9           MOV     R1,A
   \   00000F   7A0A         MOV     R2,#0xa
   \   000011   7B00         MOV     R3,#0x0
   \   000013   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   12....       LCALL   ??myApp_ReadGasLevel?relay
   \   000003   8A..         MOV     ?V0 + 0,R2
   \   000005   8B..         MOV     ?V0 + 1,R3
   \   000007   AC..         MOV     R4,?V0 + 0
   \   000009   AD..         MOV     R5,?V0 + 1
   \   00000B   EC           MOV     A,R4
   \   00000C   F8           MOV     R0,A
   \   00000D   ED           MOV     A,R5
   \   00000E   F9           MOV     R1,A
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   90....       MOV     DPTR,#sensorID
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   F0           MOVX    @DPTR,A
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001                ; Setup parameters for call to function AF_DataRequest
   \   000001   75..1E       MOV     ?V0 + 0,#0x1e
   \   000004   78..         MOV     R0,#?V0 + 0
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine12_0:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   EC           MOV     A,R4
   \   000002   F8           MOV     R0,A
   \   000003   ED           MOV     A,R5
   \   000004   F9           MOV     R1,A
   \   000005   7A0A         MOV     R2,#0xa
   \   000007   7B00         MOV     R3,#0x0
   \   000009   22           RET
    586          
    587          /*********************************************************************
    588           * @fn      GenericApp_Send_wenshidu_Message
    589           *
    590           * @brief   point to point.
    591           *
    592           * @param   none
    593           *
    594           * @return  none
    595           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    596          void GenericApp_Send_wenshidu_Message( void )//无线发送温湿度函数
   \                     GenericApp_Send_wenshidu_Message:
    597          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV     A,#-0x9
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    598            byte temp[2], humidity[2], strTemp[5];
    599          
    600            DHT11();             //获取温湿度
   \   00000A                ; Setup parameters for call to function DHT11
   \   00000A   12....       LCALL   ?Subroutine5 & 0xFFFF
    601          
    602            //将温湿度的转换成字符串,供LCD显示  
    603            temp[0] = wendu_shi+0x30;
   \                     ??CrossCallReturnLabel_11:
   \   00000D   C0E0         PUSH    A
   \   00000F   7402         MOV     A,#0x2
   \   000011   12....       LCALL   ?XSTACK_DISP0_8
   \   000014   D0E0         POP     A
   \   000016   F0           MOVX    @DPTR,A
    604            temp[1] = wendu_ge+0x30;
   \   000017   90....       MOV     DPTR,#wendu_ge
   \   00001A   E0           MOVX    A,@DPTR
   \   00001B   2430         ADD     A,#0x30
   \   00001D   C0E0         PUSH    A
   \   00001F   7403         MOV     A,#0x3
   \   000021   12....       LCALL   ?XSTACK_DISP0_8
   \   000024   D0E0         POP     A
   \   000026   F0           MOVX    @DPTR,A
    605            //temp[2] = '\0';
    606            humidity[0] = shidu_shi+0x30;
   \   000027   90....       MOV     DPTR,#shidu_shi
   \   00002A   E0           MOVX    A,@DPTR
   \   00002B   12....       LCALL   ?Subroutine9 & 0xFFFF
    607            humidity[1] = shidu_ge+0x30;
   \                     ??CrossCallReturnLabel_21:
   \   00002E   90....       MOV     DPTR,#shidu_ge
   \   000031   E0           MOVX    A,@DPTR
   \   000032   2430         ADD     A,#0x30
   \   000034   C0E0         PUSH    A
   \   000036   7401         MOV     A,#0x1
   \   000038   12....       LCALL   ?XSTACK_DISP0_8
   \   00003B   D0E0         POP     A
   \   00003D   F0           MOVX    @DPTR,A
    608            //humidity[2] = '\0';
    609            //将数据整合后方便发给协调器显示
    610            osal_memcpy(strTemp, temp, 2); 
   \   00003E                ; Setup parameters for call to function osal_memcpy
   \   00003E   7402         MOV     A,#0x2
   \   000040   12....       LCALL   ?XSTACK_DISP0_8
   \   000043   A982         MOV     R1,DPL
   \   000045   AA83         MOV     R2,DPH
   \   000047   89..         MOV     ?V0 + 0,R1
   \   000049   8A..         MOV     ?V0 + 1,R2
   \   00004B   75..00       MOV     ?V0 + 2,#0x0
   \   00004E   78..         MOV     R0,#?V0 + 0
   \   000050   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000053   7C02         MOV     R4,#0x2
   \   000055   7D00         MOV     R5,#0x0
   \   000057   7407         MOV     A,#0x7
   \   000059   12....       LCALL   ?XSTACK_DISP0_8
   \   00005C   AA82         MOV     R2,DPL
   \   00005E   AB83         MOV     R3,DPH
   \   000060   12....       LCALL   ??osal_memcpy?relay
   \   000063   7403         MOV     A,#0x3
   \   000065   12....       LCALL   ?DEALLOC_XSTACK8
    611            osal_memcpy(&strTemp[2], "&", 1);
   \   000068                ; Setup parameters for call to function osal_memcpy
   \   000068   75....       MOV     ?V0 + 0,#`?<Constant "&">` & 0xff
   \   00006B   75....       MOV     ?V0 + 1,#(`?<Constant "&">` >> 8) & 0xff
   \   00006E   78..         MOV     R0,#?V0 + 0
   \   000070   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000073   7C01         MOV     R4,#0x1
   \   000075   7D00         MOV     R5,#0x0
   \   000077   7409         MOV     A,#0x9
   \   000079   12....       LCALL   ?XSTACK_DISP0_8
   \   00007C   AA82         MOV     R2,DPL
   \   00007E   AB83         MOV     R3,DPH
   \   000080   12....       LCALL   ??osal_memcpy?relay
   \   000083   7403         MOV     A,#0x3
   \   000085   12....       LCALL   ?DEALLOC_XSTACK8
    612            osal_memcpy(&strTemp[3], humidity, 2);
   \   000088                ; Setup parameters for call to function osal_memcpy
   \   000088   85..82       MOV     DPL,?XSP + 0
   \   00008B   85..83       MOV     DPH,?XSP + 1
   \   00008E   A982         MOV     R1,DPL
   \   000090   AA83         MOV     R2,DPH
   \   000092   89..         MOV     ?V0 + 0,R1
   \   000094   8A..         MOV     ?V0 + 1,R2
   \   000096   78..         MOV     R0,#?V0 + 0
   \   000098   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   00009B   7C02         MOV     R4,#0x2
   \   00009D   7D00         MOV     R5,#0x0
   \   00009F   740A         MOV     A,#0xa
   \   0000A1   12....       LCALL   ?XSTACK_DISP0_8
   \   0000A4   AA82         MOV     R2,DPL
   \   0000A6   AB83         MOV     R3,DPH
   \   0000A8   12....       LCALL   ??osal_memcpy?relay
   \   0000AB   7403         MOV     A,#0x3
   \   0000AD   12....       LCALL   ?DEALLOC_XSTACK8
    613           
    614            AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    615                                 GENERICAPP_wenshidu_CLUSTERID,
    616                                 5,
    617                                 strTemp,
    618                                 &GenericApp_TransID,
    619                                 AF_DISCV_ROUTE,
    620                                 AF_DEFAULT_RADIUS ) ;
   \   0000B0                ; Setup parameters for call to function AF_DataRequest
   \   0000B0   75..1E       MOV     ?V0 + 0,#0x1e
   \   0000B3   78..         MOV     R0,#?V0 + 0
   \   0000B5   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000B8   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   0000BB   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   0000BE   78..         MOV     R0,#?V0 + 0
   \   0000C0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000C3   7407         MOV     A,#0x7
   \   0000C5   12....       LCALL   ?XSTACK_DISP0_8
   \   0000C8   8582..       MOV     ?V0 + 0,DPL
   \   0000CB   8583..       MOV     ?V0 + 1,DPH
   \   0000CE   78..         MOV     R0,#?V0 + 0
   \   0000D0   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000D3   75..05       MOV     ?V0 + 0,#0x5
   \   0000D6   75..00       MOV     ?V0 + 1,#0x0
   \   0000D9   78..         MOV     R0,#?V0 + 0
   \   0000DB   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000DE   75..03       MOV     ?V0 + 0,#0x3
   \   0000E1   78..         MOV     R0,#?V0 + 0
   \   0000E3   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000E6   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0000E9   12....       LCALL   ?DEALLOC_XSTACK8
    621          }
   \   0000EC   7409         MOV     A,#0x9
   \   0000EE   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000F1   7F03         MOV     R7,#0x3
   \   0000F3   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   000003   F0           MOVX    @DPTR,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   2430         ADD     A,#0x30
   \   000002   85..82       MOV     DPL,?XSP + 0
   \   000005   85..83       MOV     DPH,?XSP + 1
   \   000008   22           RET
    622          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   78..         MOV     R0,#?V0 + 0
   \   000002   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000005   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   000008   12....       LCALL   ?DEALLOC_XSTACK8
   \   00000B   7403         MOV     A,#0x3
   \   00000D                REQUIRE ??Subroutine11_0
   \   00000D                ; // Fall through to label ??Subroutine11_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    623          void GenericApp_Send_Guangqiang_Message(void)//无线发送光强信息函数
   \                     GenericApp_Send_Guangqiang_Message:
    624          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    625            unsigned char theMessageData[3] ;
    626            //char guangqiang_xianshi[13];
    627            uint16 LightLevel;
    628            LightLevel = myApp_ReadLightLevel();//读取光强值
   \   00000A                ; Setup parameters for call to function myApp_ReadLightLevel
   \   00000A   12....       LCALL   ?Subroutine6 & 0xFFFF
    629            theMessageData[0] = LightLevel / 10 + '0';
   \                     ??CrossCallReturnLabel_13:
   \   00000D   12....       LCALL   ?US_DIV_MOD
   \   000010   12....       LCALL   ?Subroutine2 & 0xFFFF
    630            theMessageData[1] = LightLevel % 10 + '0';
   \                     ??CrossCallReturnLabel_25:
   \   000013   12....       LCALL   ?US_DIV_MOD
   \   000016   EA           MOV     A,R2
   \   000017   2430         ADD     A,#0x30
   \   000019   C0E0         PUSH    A
   \   00001B   7401         MOV     A,#0x1
   \   00001D   12....       LCALL   ?XSTACK_DISP0_8
   \   000020   D0E0         POP     A
   \   000022   12....       LCALL   ?Subroutine4 & 0xFFFF
    631            theMessageData[2] = sensorID;
   \                     ??CrossCallReturnLabel_6:
   \   000025   C0E0         PUSH    A
   \   000027   7402         MOV     A,#0x2
   \   000029   12....       LCALL   ?XSTACK_DISP0_8
   \   00002C   D0E0         POP     A
   \   00002E   12....       LCALL   ?Subroutine3 & 0xFFFF
    632            
    633            //osal_memcpy(guangqiang_xianshi, "guangqiang:", 11);
    634            //osal_memcpy(&guangqiang_xianshi[11], theMessageData, 2);
    635            //HalLcdWriteString(guangqiang_xianshi, 3);
    636            
    637            AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    638                                 GenericApp_Guangqiang_CLUSTERID,
    639                                 3,
    640                                 theMessageData,
    641                                 &GenericApp_TransID,
    642                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS );
   \                     ??CrossCallReturnLabel_1:
   \   000031   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000034   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   000037   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   00003A   78..         MOV     R0,#?V0 + 0
   \   00003C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003F   7403         MOV     A,#0x3
   \   000041   12....       LCALL   ?XSTACK_DISP0_8
   \   000044   8582..       MOV     ?V0 + 0,DPL
   \   000047   8583..       MOV     ?V0 + 1,DPH
   \   00004A   78..         MOV     R0,#?V0 + 0
   \   00004C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00004F   75..03       MOV     ?V0 + 0,#0x3
   \   000052   75..00       MOV     ?V0 + 1,#0x0
   \   000055   78..         MOV     R0,#?V0 + 0
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005A   75..04       MOV     ?V0 + 0,#0x4
   \   00005D   02....       LJMP    ?Subroutine0 & 0xFFFF
    643          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   E8           MOV     A,R0
   \   000001   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000004                REQUIRE ??Subroutine12_0
   \   000004                ; // Fall through to label ??Subroutine12_0
    644          
    645          /*********************************************************************
    646           */
    647          /*********************************************************************
    648          读取光强函数
    649          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    650          uint16 myApp_ReadLightLevel( void )
   \                     myApp_ReadLightLevel:
    651          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    652            uint16 reading = 0;
    653            
    654            /* Enable channel */
    655            ADCCFG |= 0x40;
   \   000000   43F240       ORL     0xf2,#0x40
    656            
    657            /* writing to this register starts the extra conversion */
    658            ADCCON3 = 0x86;
   \   000003   75B686       MOV     0xb6,#-0x7a
    659            
    660            /* Wait for the conversion to be done */
    661            while (!(ADCCON1 & 0x80));
   \                     ??myApp_ReadLightLevel_0:
   \   000006   E5B4         MOV     A,0xb4
   \   000008   A2E7         MOV     C,0xE0 /* A   */.7
   \   00000A   50FA         JNC     ??myApp_ReadLightLevel_0
    662            
    663            /* Disable channel after done conversion */
    664            ADCCFG &= (0x40 ^ 0xFF);
   \   00000C   53F2BF       ANL     0xf2,#0xbf
    665            
    666            /* Read the result */
    667            reading = ADCH;
   \   00000F                REQUIRE ?Subroutine1
   \   00000F                REQUIRE ADCCFG
   \   00000F                REQUIRE ADCCON3
   \   00000F                REQUIRE ADCCON1
   \   00000F                REQUIRE ADCH
   \   00000F                ; // Fall through to label ?Subroutine1
    668            reading |= (int16) (ADCH << 8); 
    669            
    670            reading >>= 8;
    671            
    672            return (reading);
    673          } 

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   E5BB         MOV     A,0xbb
   \   000002   E5BB         MOV     A,0xbb
   \   000004   FA           MOV     R2,A
   \   000005   E4           CLR     A
   \   000006   FB           MOV     R3,A
   \   000007   02....       LJMP    ?BRET
    674          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    675          void GenericApp_Send_GAN_Message( void )//发送光强函数
   \                     GenericApp_Send_GAN_Message:
    676          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 4
   \   000005   74FC         MOV     A,#-0x4
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    677            //char strGan[10];
    678            unsigned char theMessageData[4] ;
    679            uint16 GasLevel;
    680            GasLevel = myApp_ReadGasLevel();
   \   00000A                ; Setup parameters for call to function myApp_ReadGasLevel
   \   00000A   12....       LCALL   ?Subroutine7 & 0xFFFF
    681            /*HalLedSet (HAL_LED_1, HAL_LED_MODE_OFF);
    682            if(GasLevel>90)
    683            {
    684              HalLedSet (HAL_LED_1, HAL_LED_MODE_ON);
    685            }
    686            else
    687            {
    688              HalLedSet (HAL_LED_1, HAL_LED_MODE_OFF);
    689            }*/
    690            theMessageData[0] = GasLevel / 100 + '0';
   \                     ??CrossCallReturnLabel_15:
   \   00000D   7A64         MOV     R2,#0x64
   \   00000F   7B00         MOV     R3,#0x0
   \   000011   12....       LCALL   ?US_DIV_MOD
   \   000014   12....       LCALL   ?Subroutine2 & 0xFFFF
    691            theMessageData[1] = GasLevel / 10%10 + '0';
   \                     ??CrossCallReturnLabel_26:
   \   000017   12....       LCALL   ?US_DIV_MOD
   \   00001A   7A0A         MOV     R2,#0xa
   \   00001C   7B00         MOV     R3,#0x0
   \   00001E   12....       LCALL   ?US_DIV_MOD
   \   000021   EA           MOV     A,R2
   \   000022   2430         ADD     A,#0x30
   \   000024   C0E0         PUSH    A
   \   000026   7401         MOV     A,#0x1
   \   000028   12....       LCALL   ?XSTACK_DISP0_8
   \   00002B   D0E0         POP     A
   \   00002D   12....       LCALL   ??Subroutine12_0 & 0xFFFF
    692            theMessageData[2] = GasLevel % 10 + '0';
   \                     ??CrossCallReturnLabel_28:
   \   000030   12....       LCALL   ?US_DIV_MOD
   \   000033   EA           MOV     A,R2
   \   000034   2430         ADD     A,#0x30
   \   000036   C0E0         PUSH    A
   \   000038   7402         MOV     A,#0x2
   \   00003A   12....       LCALL   ?XSTACK_DISP0_8
   \   00003D   D0E0         POP     A
   \   00003F   12....       LCALL   ?Subroutine4 & 0xFFFF
    693            theMessageData[3] = sensorID;
   \                     ??CrossCallReturnLabel_7:
   \   000042   C0E0         PUSH    A
   \   000044   7403         MOV     A,#0x3
   \   000046   12....       LCALL   ?XSTACK_DISP0_8
   \   000049   D0E0         POP     A
   \   00004B   12....       LCALL   ?Subroutine3 & 0xFFFF
    694                 
    695            //HalUARTWrite(0, "GAN:", 4);           //输出提示信息
    696            //HalUARTWrite(0, theMessageData, 2);
    697            //HalUARTWrite(0, "\n",1);
    698          
    699            //osal_memcpy(strGan, "TEMP:", 5);
    700            //osal_memcpy(&strGan[5], theMessageData, 3);
    701            //HalLcdWriteString("123", HAL_LCD_LINE_3); //LCD显示
    702             
    703            AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    704                                 GenericApp_GAN_CLUSTERID,
    705                                 4,
    706                                 theMessageData,
    707                                 &GenericApp_TransID,
    708                                 AF_DISCV_ROUTE,
    709                                 AF_DEFAULT_RADIUS );
   \                     ??CrossCallReturnLabel_2:
   \   00004E   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000051   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   000054   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   000057   78..         MOV     R0,#?V0 + 0
   \   000059   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005C   7403         MOV     A,#0x3
   \   00005E   12....       LCALL   ?XSTACK_DISP0_8
   \   000061   8582..       MOV     ?V0 + 0,DPL
   \   000064   8583..       MOV     ?V0 + 1,DPH
   \   000067   78..         MOV     R0,#?V0 + 0
   \   000069   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006C   75..04       MOV     ?V0 + 0,#0x4
   \   00006F   75..00       MOV     ?V0 + 1,#0x0
   \   000072   78..         MOV     R0,#?V0 + 0
   \   000074   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000077   75..02       MOV     ?V0 + 0,#0x2
   \   00007A   78..         MOV     R0,#?V0 + 0
   \   00007C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007F   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   000082   12....       LCALL   ?DEALLOC_XSTACK8
    710          }
   \   000085   7404         MOV     A,#0x4
   \   000087   02....       LJMP    ??Subroutine11_0 & 0xFFFF
    711          
    712          /*********************************************************************
    713          读烟雾浓度函数
    714          */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    715          uint16 myApp_ReadGasLevel( void )
   \                     myApp_ReadGasLevel:
    716          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
    717            uint16 reading = 0;
    718            
    719            /* Enable channel */
    720            ADCCFG |= 0x80;
   \   000000   43F280       ORL     0xf2,#0x80
    721            
    722            /* writing to this register starts the extra conversion */
    723            ADCCON3 = 0x87;
   \   000003   75B687       MOV     0xb6,#-0x79
    724            
    725            /* Wait for the conversion to be done */
    726            while (!(ADCCON1 & 0x80));
   \                     ??myApp_ReadGasLevel_0:
   \   000006   E5B4         MOV     A,0xb4
   \   000008   A2E7         MOV     C,0xE0 /* A   */.7
   \   00000A   50FA         JNC     ??myApp_ReadGasLevel_0
    727            
    728            /* Disable channel after done conversion */
    729            ADCCFG &= (0x80 ^ 0xFF);
   \   00000C   53F27F       ANL     0xf2,#0x7f
    730            
    731            /* Read the result */
    732            reading = ADCH;
   \   00000F   02....       LJMP    ?Subroutine1 & 0xFFFF
   \   000012                REQUIRE ADCCFG
   \   000012                REQUIRE ADCCON3
   \   000012                REQUIRE ADCCON1
   \   000012                REQUIRE ADCH
    733            reading |= (int16) (ADCH << 8); 
    734            
    735            reading >>= 8;
    736            
    737            return (reading);
    738          }
    739          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    740          void GenericApp_Send_wedu_Message( void )//我加的，温度无线发送函数
   \                     GenericApp_Send_wedu_Message:
    741          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    742            byte str[3];
    743            //char strTemp[10];
    744            byte temp;
    745          
    746            temp = ReadDs18B20();                //读取温度数据
   \   00000A                ; Setup parameters for call to function ReadDs18B20
   \   00000A   12....       LCALL   ??ReadDs18B20?relay
   \   00000D   E9           MOV     A,R1
   \   00000E   F8           MOV     R0,A
    747          
    748            str[0] = temp/10+48;
   \   00000F   75F00A       MOV     B,#0xa
   \   000012   84           DIV     AB
   \   000013   12....       LCALL   ?Subroutine9 & 0xFFFF
    749            str[1] = temp%10+48;
   \                     ??CrossCallReturnLabel_22:
   \   000016   E8           MOV     A,R0
   \   000017   75F00A       MOV     B,#0xa
   \   00001A   84           DIV     AB
   \   00001B   E5F0         MOV     A,B
   \   00001D   2430         ADD     A,#0x30
   \   00001F   C0E0         PUSH    A
   \   000021   7401         MOV     A,#0x1
   \   000023   12....       LCALL   ?XSTACK_DISP0_8
   \   000026   D0E0         POP     A
   \   000028   12....       LCALL   ?Subroutine4 & 0xFFFF
    750            str[2] = sensorID;
   \                     ??CrossCallReturnLabel_8:
   \   00002B   C0E0         PUSH    A
   \   00002D   7402         MOV     A,#0x2
   \   00002F   12....       LCALL   ?XSTACK_DISP0_8
   \   000032   D0E0         POP     A
   \   000034   12....       LCALL   ?Subroutine3 & 0xFFFF
    751            //str[2] = ' ';
    752            //str[3] = 'C';
    753            //str[4] = '\0';    
    754          
    755            //osal_memcpy(strTemp, "TEMP:", 5);
    756            //osal_memcpy(&strTemp[5], str, 5);
    757            //HalLcdWriteString(strTemp, HAL_LCD_LINE_3); //LCD显示
    758            
    759            AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    760                                 GenericApp_wendu_CLUSTERID,
    761                                 3,
    762                                 str,
    763                                 &GenericApp_TransID,
    764                                 AF_DISCV_ROUTE,
    765                                 AF_DEFAULT_RADIUS ) ;
   \                     ??CrossCallReturnLabel_3:
   \   000037   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00003A   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   00003D   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   000040   78..         MOV     R0,#?V0 + 0
   \   000042   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000045   7403         MOV     A,#0x3
   \   000047   12....       LCALL   ?XSTACK_DISP0_8
   \   00004A   8582..       MOV     ?V0 + 0,DPL
   \   00004D   8583..       MOV     ?V0 + 1,DPH
   \   000050   78..         MOV     R0,#?V0 + 0
   \   000052   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000055   75..03       MOV     ?V0 + 0,#0x3
   \   000058   75..00       MOV     ?V0 + 1,#0x0
   \   00005B   78..         MOV     R0,#?V0 + 0
   \   00005D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000060   75..05       MOV     ?V0 + 0,#0x5
   \   000063   02....       LJMP    ?Subroutine0 & 0xFFFF
    766          }
    767          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    768          void GenericApp_Send_rentihongwai_Message( void )//我加的，人体红外无线发送函数
   \                     GenericApp_Send_rentihongwai_Message:
    769          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV     A,#-0x2
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    770            byte str[2];
    771            if(P0_5 == 0)
   \   00000A   A285         MOV     C,0x80.5
   \   00000C   85..82       MOV     DPL,?XSP + 0
   \   00000F   85..83       MOV     DPH,?XSP + 1
   \   000012   4004         JC      ??GenericApp_Send_rentihongwai_Message_0
    772            {
    773              str[0] = '0' ;
   \   000014   7430         MOV     A,#0x30
   \   000016   8002         SJMP    ??GenericApp_Send_rentihongwai_Message_1
    774            }
    775            else
    776            {
    777              str[0] = '1' ;
   \                     ??GenericApp_Send_rentihongwai_Message_0:
   \   000018   7431         MOV     A,#0x31
    778            }
   \                     ??GenericApp_Send_rentihongwai_Message_1:
   \   00001A   12....       LCALL   ?Subroutine4 & 0xFFFF
    779            str[1] = sensorID;
   \                     ??CrossCallReturnLabel_9:
   \   00001D   C0E0         PUSH    A
   \   00001F   7401         MOV     A,#0x1
   \   000021   12....       LCALL   ?XSTACK_DISP0_8
   \   000024   D0E0         POP     A
   \   000026   12....       LCALL   ?Subroutine3 & 0xFFFF
    780              
    781            AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    782                                 GenericApp_rentihongwai_CLUSTERID,
    783                                 2,
    784                                 str,
    785                                 &GenericApp_TransID,
    786                                 AF_DISCV_ROUTE,
    787                                 AF_DEFAULT_RADIUS ) ;
   \                     ??CrossCallReturnLabel_4:
   \   000029   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00002C   75....       MOV     ?V0 + 0,#GenericApp_TransID & 0xff
   \   00002F   75....       MOV     ?V0 + 1,#(GenericApp_TransID >> 8) & 0xff
   \   000032   78..         MOV     R0,#?V0 + 0
   \   000034   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000037   7403         MOV     A,#0x3
   \   000039   12....       LCALL   ?XSTACK_DISP0_8
   \   00003C   8582..       MOV     ?V0 + 0,DPL
   \   00003F   8583..       MOV     ?V0 + 1,DPH
   \   000042   78..         MOV     R0,#?V0 + 0
   \   000044   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000047   75..02       MOV     ?V0 + 0,#0x2
   \   00004A   75..00       MOV     ?V0 + 1,#0x0
   \   00004D   78..         MOV     R0,#?V0 + 0
   \   00004F   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000052   75..06       MOV     ?V0 + 0,#0x6
   \   000055   78..         MOV     R0,#?V0 + 0
   \   000057   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00005A   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   00005D   12....       LCALL   ?DEALLOC_XSTACK8
    788            
    789          }
   \   000060   7402         MOV     A,#0x2
   \   000062   02....       LJMP    ??Subroutine11_0 & 0xFFFF
   \   000065                REQUIRE _A_P0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for sensorID>`:
   \   000000   31           DB 49

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Init?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_ProcessEvent?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_ProcessEvent

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Send_Sensor_Message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Send_Sensor_Message

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Send_wenshidu_Message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Send_wenshidu_Message

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Send_Guangqiang_Message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Send_Guangqiang_Message

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??myApp_ReadLightLevel?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    myApp_ReadLightLevel

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Send_GAN_Message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Send_GAN_Message

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??myApp_ReadGasLevel?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    myApp_ReadGasLevel

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Send_wedu_Message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Send_wedu_Message

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??GenericApp_Send_rentihongwai_Message?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    GenericApp_Send_rentihongwai_Message

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "GenericApp">`:
   \   000000   47656E65     DB "GenericApp"
   \            72696341
   \            707000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "&">`:
   \   000000   2600         DB "&"
    790          
    791          /*********************************************************************
    792           * @fn      GenericApp_SendTheMessage
    793           *
    794           * @brief   Send "the" message.
    795           *
    796           * @param   none
    797           *
    798           * @return  none
    799           */
    800          static void GenericApp_SendTheMessage( void )
                             ^
Warning[Pe177]: function "GenericApp_SendTheMessage" was declared but never
          referenced
    801          {
    802            char theMessageData[] = "Hello World";
    803          
    804            if ( AF_DataRequest( &GenericApp_DstAddr, &GenericApp_epDesc,
    805                                 GENERICAPP_CLUSTERID,
    806                                 (byte)osal_strlen( theMessageData ) + 1,
    807                                 (byte *)&theMessageData,
    808                                 &GenericApp_TransID,
    809                                 AF_DISCV_ROUTE, AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
    810            {
    811              // Successfully requested to be sent.
    812            }
    813            else
    814            {
    815              // Error occurred in request to send.
    816            }
    817          }
    818          
    819          #if defined( IAR_ARMCM3_LM )
    820          /*********************************************************************
    821           * @fn      GenericApp_ProcessRtosMessage
    822           *
    823           * @brief   Receive message from RTOS queue, send response back.
    824           *
    825           * @param   none
    826           *
    827           * @return  none
    828           */
    829          static void GenericApp_ProcessRtosMessage( void )
    830          {
    831            osalQueue_t inMsg;
    832          
    833            if ( osal_queue_receive( OsalQueue, &inMsg, 0 ) == pdPASS )
    834            {
    835              uint8 cmndId = inMsg.cmnd;
    836              uint32 counter = osal_build_uint32( inMsg.cbuf, 4 );
    837          
    838              switch ( cmndId )
    839              {
    840                case CMD_INCR:
    841                  counter += 1;  /* Increment the incoming counter */
    842                                 /* Intentionally fall through next case */
    843          
    844                case CMD_ECHO:
    845                {
    846                  userQueue_t outMsg;
    847          
    848                  outMsg.resp = RSP_CODE | cmndId;  /* Response ID */
    849                  osal_buffer_uint32( outMsg.rbuf, counter );    /* Increment counter */
    850                  osal_queue_send( UserQueue1, &outMsg, 0 );  /* Send back to UserTask */
    851                  break;
    852                }
    853                
    854                default:
    855                  break;  /* Ignore unknown command */    
    856              }
    857            }
    858          }
    859          #endif
    860          
    861          /*********************************************************************
    862           */

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     GenericApp_Init                    0      0      9
       -> afRegister                    0      0     18
       -> RegisterForKeys               0      0     18
       -> HalLcdWriteString             0      0     18
       -> ZDO_RegisterForZDOMsg         0      0     18
       -> ZDO_RegisterForZDOMsg         0      0     18
     GenericApp_ProcessEvent            0      0     32
       -> osal_msg_receive              0      0     46
       -> osal_start_timerEx            0      0     46
       -> osal_msg_deallocate           0      0     46
       -> osal_msg_receive              0      0     46
       -> ZDO_ParseEPListRsp            0      0     46
       -> HalLedSet                     0      0     46
       -> osal_mem_free                 0      0     46
       -> HalLedSet                     0      0     46
       -> HalLedSet                     0      0     46
       -> HalLedSet                     0      0     46
       -> NLME_GetShortAddr             0      0     46
       -> ZDP_EndDeviceBindReq          0      0     64
       -> HalLedSet                     0      0     46
       -> ZDP_MatchDescReq              0      0     62
       -> GenericApp_Send_Sensor_Message
                                        0      0     46
       -> osal_start_timerEx            0      0     46
     GenericApp_Send_GAN_Message        1      0     23
       -> myApp_ReadGasLevel            0      0     28
       -> AF_DataRequest                0      0     46
     GenericApp_Send_Guangqiang_Message
                                        1      0     22
       -> myApp_ReadLightLevel          0      0     26
       -> AF_DataRequest                0      0     44
     GenericApp_Send_Sensor_Message     1      0     53
       -> DHT11                         0      0     42
       -> myApp_ReadLightLevel          0      0     42
       -> myApp_ReadGasLevel            0      0     42
       -> AF_DataRequest                0      0     60
     GenericApp_Send_rentihongwai_Message
                                        1      0     21
       -> AF_DataRequest                0      0     42
     GenericApp_Send_wedu_Message       1      0     22
       -> ReadDs18B20                   0      0     26
       -> AF_DataRequest                0      0     44
     GenericApp_Send_wenshidu_Message
                                        1      0     29
       -> DHT11                         0      0     40
       -> osal_memcpy                   0      0     46
       -> osal_memcpy                   0      0     46
       -> osal_memcpy                   0      0     46
       -> AF_DataRequest                0      0     58
     myApp_ReadGasLevel                 0      0     21
     myApp_ReadLightLevel               0      0     21


   Segment part sizes:

     Function/Label                               Bytes
     --------------                               -----
     _A_P0                                           1
     ADCCON1                                         1
     ADCCON3                                         1
     ADCH                                            1
     ADCCFG                                          1
     GenericApp_ClusterList                          8
     GenericApp_SimpleDesc                          12
     GenericApp_epDesc                               6
     GenericApp_TaskID                               1
     GenericApp_NwkState                             1
     GenericApp_TransID                              1
     GenericApp_DstAddr                             12
     sensorID                                        1
     GenericApp_Init                               118
     GenericApp_ProcessEvent                       556
     GenericApp_Send_Sensor_Message                270
     ??Subroutine11_0                                8
     ?Subroutine8                                   16
     ?Subroutine5                                   10
     ?Subroutine6                                   20
     ?Subroutine7                                   16
     ?Subroutine4                                    6
     ?Subroutine3                                    7
     ??Subroutine12_0                               10
     GenericApp_Send_wenshidu_Message
                                                   246
     ?Subroutine9                                    5
     ?Subroutine10                                   9
     ?Subroutine0                                   13
     GenericApp_Send_Guangqiang_Message
                                                    96
     ?Subroutine2                                    4
     myApp_ReadLightLevel                           15
     ?Subroutine1                                   10
     GenericApp_Send_GAN_Message                   138
     myApp_ReadGasLevel                             18
     GenericApp_Send_wedu_Message                  102
     GenericApp_Send_rentihongwai_Message
                                                   101
     ?<Initializer for sensorID>                     1
     ??GenericApp_Init?relay                         6
     ??GenericApp_ProcessEvent?relay                 6
     ??GenericApp_Send_Sensor_Message?relay          6
     ??GenericApp_Send_wenshidu_Message?relay        6
     ??GenericApp_Send_Guangqiang_Message?relay      6
     ??myApp_ReadLightLevel?relay                    6
     ??GenericApp_Send_GAN_Message?relay             6
     ??myApp_ReadGasLevel?relay                      6
     ??GenericApp_Send_wedu_Message?relay            6
     ??GenericApp_Send_rentihongwai_Message?relay    6
     ?<Constant "GenericApp">                       11
     ?<Constant "&">                                 2

 
 1 794 bytes in segment BANKED_CODE
    60 bytes in segment BANK_RELAYS
     5 bytes in segment SFR_AN
     1 byte  in segment XDATA_I
     1 byte  in segment XDATA_ID
    33 bytes in segment XDATA_ROM_C
    21 bytes in segment XDATA_Z
 
 1 855 bytes of CODE  memory
    33 bytes of CONST memory
     0 bytes of DATA  memory (+ 5 bytes shared)
    22 bytes of XDATA memory

Errors: none
Warnings: 1
